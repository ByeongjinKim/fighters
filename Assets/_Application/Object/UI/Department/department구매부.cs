using System.Collections;
using System.Collections.Generic;
using UnityEngine.UI;
using UnityEngine;

//-----------------------------------------------------------------------------------------------------------------------------------
// 구매부를 처리하기 위한 클래스
//-----------------------------------------------------------------------------------------------------------------------------------
public class department구매부 : uiDepartment, IListInterface
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	[System.Serializable]
	public class tagData : _tagData
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public objControl					공급_계약			= (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public List<tagSupplyContract>		Contracts		= new List<tagSupplyContract>();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	};
	public tagData		data		= new tagData();

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	protected override void Awake()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Initialize( data );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	protected override void Start()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		base.Start();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( !CApp.This.Business.IsRight(GetBusiness()) )
		{
			if( (data.공급_계약)!=(null) )
			{
				data.공급_계약.OFF();
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 클릭에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void OnClick()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 컨트롤 입력에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool ONCONTROL( objControl control, CONTROL_ACTION Action, tagFocus focus=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(null) ) return false;
//		if( (focus)==(null) ) return false;		//(NULL)값을 허용함

		//---------------------------------------------------------------------------------------------------------------------------
		// 연결
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.공급_계약) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			CApp.This.Department.SetID( Data().id );
			CApp.This.ViewProductStaticList.ON( (this), (false) );

			//-----------------------------------------------------------------------------------------------------------------------
			// 공급 계약을 불러옴
			//-----------------------------------------------------------------------------------------------------------------------
			if( (data.Contracts.Count)<=(0) )
			{
				CApp.This.ViewIndigator.ON( this );
				ManagementHash.LoadSupplyContract( GetBusiness().id );
			}
			else
			{
				CApp.This.MessageQueue.ON( funcUpdateSupplyContractList );
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( uiProduct product in Products() )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( (control)==product.Option() && (Action)==(CONTROL_ACTION.SELECT) )
			{
				CApp.This.ViewIndigator.ON(CApp.This.ViewBusiness);
				ManagementHash.LoadSupplyBusiness( GetBusiness(), product.Get() );
				return true;
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return base.ONCONTROL( (control), (Action), (focus) );
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public bool IList_AllowList( object param )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (param)==(null) || param.GetType()!=typeof(tagProductStatic) ) return false;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		tagProductStatic productstatic = (param as tagProductStatic);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( GetBusiness()!=(null) )
		{
			switch( GetBusiness().businessstatic.Type )
			{
				//-------------------------------------------------------------------------------------------------------------------
				// 소매점 (MARKET)
				//-------------------------------------------------------------------------------------------------------------------
				case (UPDATE_TYPE.Market):
					return (productstatic.retail);

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				default:
					switch( productstatic.Type )
					{
						//-----------------------------------------------------------------------------------------------------------
						// 작물 (Crop)
						//-----------------------------------------------------------------------------------------------------------
						case (UPDATE_TYPE.Crop):
							if( productstatic.industry )
							{
								return true;
							}
							break;

						//-----------------------------------------------------------------------------------------------------------
						// 가축 (Animal)
						//-----------------------------------------------------------------------------------------------------------
						case (UPDATE_TYPE.Animal):
							break;

						//-----------------------------------------------------------------------------------------------------------
						// -
						//-----------------------------------------------------------------------------------------------------------
						default:
							//-------------------------------------------------------------------------------------------------------
							// -
							//-------------------------------------------------------------------------------------------------------
							if( productstatic.industry )
							{
								return true;
							}

							//-------------------------------------------------------------------------------------------------------
							// -
							//-------------------------------------------------------------------------------------------------------
							return !(productstatic.retail);

						//-----------------------------------------------------------------------------------------------------------
						// -
						//-----------------------------------------------------------------------------------------------------------
					}
					break;

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void IList_Select( ViewPanel panel, object wParam=(null), object lParam=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
//		if( (panel)==(null) ) return;	//(NULL)값을 허용함
//		if( (wParam)==(null) ) return;	//(NULL)값을 허용함
//		if( (lParam)==(null) ) return;	//(NULL)값을 허용함

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (panel)==(CApp.This.ViewProductStaticList) )
		{
			uiIcon icon = (wParam as uiIcon);
			if( (icon)!=(null) )
			{
				IList_Select_ProductStaticList( icon.Get() as tagProductStatic );
			}
		}
		else
		if( (panel)==(CApp.This.ViewProductList) )
		{
			uiProduct icon = (wParam as uiProduct);
			if( (icon)!=(null) )
			{
				IList_Select_ProductList( icon.GetBusinessID(), icon.ID(), icon.Get() );
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void IList_Select_ProductStaticList( tagProductStatic productstatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (productstatic)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		CApp.This.ViewProductList.ON( (productstatic), (this) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void IList_Select_ProductList( string business, string id, tagProductStatic productstatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( !Func.Is(business) ) return;
		if( !Func.Is(id) ) return;
		if( (productstatic)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( IsContract( (business), (productstatic) ) )
		{
			CApp.This.Confirm.ON( CApp.This.Language.Get(TEXT.이_계약을_중단하시겠습니까), (CONFIRM.YESNO), (funcContractTerminate), CApp.This.ViewBusiness.Get(), (id) );
		}
		else
		{
			CApp.This.Confirm.ON( Func.Script( CApp.This.Language.Get(TEXT.__를_계약하시겠습니까), CApp.This.Language.Get(productstatic.Name()) ), (CONFIRM.YESNO), (funcSupplyContract), (id), (productstatic) );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	void funcSupplyContract( object wParam=(null), object lParam=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (wParam)==(null) || wParam.GetType()!=typeof(string) ) return;
		if( (lParam)==(null) || lParam.GetType()!=typeof(tagProductStatic) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		CApp.This.ViewProductList.Indigator( CApp.This.Language.Get(TEXT.공급을_계약중입니다) );
		ManagementHash.SupplyContract( (GetBusiness().id), (wParam as string) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 계약 정보를 등록하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void RegisterContract( string supply, tagProductStatic productstatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (supply)==(null) ) return;
		if( (productstatic)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( !IsContract( (supply), (productstatic) ) )
		{
			data.Contracts.Add( new tagSupplyContract( (supply), (productstatic) ) );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 계약 정보를 확인하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public bool IsContract( string supply, tagProductStatic productstatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (supply)==(null) ) return false;
		if( (productstatic)==(null) ) return false;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( tagSupplyContract contract in data.Contracts )
		{
			if( (contract.supply)==(supply) && (contract.productstatic)==(productstatic) )
			{
				return true;
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void IList_OnList( ViewPanel panel, object param )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (panel)==(null) ) return;
		if( (param)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (panel)==(CApp.This.ViewProductList) )
		{
			IList_OnList_ProductList(param as uiProduct);
		}
		/*
		else
		if( (panel)==(CApp.This.ViewProductStaticList) )
		{
			IList_OnList_ProductStaticList(param as uiIcon);
		}
		*/

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void IList_OnList_ProductList( uiProduct icon )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (icon)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( IsContract( icon.GetBusinessID(), icon.Get() ) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			icon.Alpha( 0.15f );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			objControl hold = (Func.Create( icon.Transform(), (Resources.Load(PATH.UI_LIST_ITEM_HOLD) as GameObject) ).GetComponent(typeof(objControl)) as objControl);
			if( hold._RectTransform()!=(null) )
			{
				(hold._RectTransform().localPosition)	= new Vector3();
				(hold._RectTransform().offsetMin)		= new Vector2( (0), (0) );
				(hold._RectTransform().offsetMax)		= new Vector2( (0), (0) );
				(icon.data.control) = (hold);
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( icon.Excute()!=(null) )
			{
				icon.Excute().OFF();
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}
		
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		icon.SetRaycastTarget( false );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void IList_LoadList( int page, object wParam=(null), object lParam=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (wParam)==(null) || wParam.GetType()!=typeof(tagProductStatic) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		ManagementHash.LoadSupplyProductList( CApp.This.ViewBusiness.Get(), (wParam as tagProductStatic), (page) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 활성화 할 수 있는지 확인하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool IsAllowInterfaceActive( Transform transform )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (transform)==(null) ) return false;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (transform)==data.공급_계약.Transform() && !CApp.This.Business.IsRight(GetBusiness()) )
		{
			return false;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return true;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 계약 정보를 확인하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public bool IsContract()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (data.Contracts.Count)>(0) )
		{
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 상품 정보를 등록하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void onRegister( uiProduct icon, tagProductStatic productstatic, AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (icon)==(null) ) return;
		if( (productstatic)==(null) ) return;
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( CApp.This.Business.IsRight(GetBusiness()) )
		{
			Func.Active( icon.Option()._GameObject() );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	int GetContractCount( tagProductStatic productstatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (productstatic)==(null) ) return (0);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		int Count = (0);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( tagSupplyContract contract in data.Contracts )
		{
			if( (contract.productstatic)==(productstatic) )
			{
				(Count)	+= (1);
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (Count);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 공급 계약 정보를 업데이트 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void funcUpdateSupplyContractList( object wParam=(null), object lParam=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		int	nContractCount = (0);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( uiIcon icon in CApp.This.ViewProductStaticList.GetList() )
		{
			(nContractCount) = GetContractCount(icon.Get() as tagProductStatic);
			if( (nContractCount)>(0) )
			{
				CreateContractCount( (icon), (nContractCount) );
				(icon.data.sortIndex) = (nContractCount);
			}
			else
			if( (icon.data.sortIndex)>(0) && (nContractCount)==(0) )
			{
				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				Transform contractCount = Func.Get( icon.Transform(), "ContractCount" );
				if( (contractCount)!=(null) )
				{
					Func.Destroy(contractCount);
				}

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				(icon.data.sortIndex) = (nContractCount);

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		CApp.This.ViewProductStaticList.Sort();
		CApp.This.ViewProductStaticList.Refresh();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	void CreateContractCount( uiIcon icon, int nCount )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (icon)==(null) ) return;
		if( (nCount)<=(0) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Transform transform = Func.Get( icon.Transform(), "ContractCount" );
		if( (transform)==(null) || (transform)==icon.Transform() )
		{
			(transform) = Func.Create( icon.Transform(), (Resources.Load("UI/Count") as GameObject) );
			if( (transform)!=(null) )
			{
				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				(transform.localPosition)		= new Vector3( (320), (0), (0) );
				(transform.localEulerAngles)	= new Vector3();
				(transform.localScale)			= new Vector3( (1), (1), (1) );

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				GameObject gameObject = (transform.gameObject);
				if( (gameObject)!=(null) )
				{
					(gameObject.name)	= "ContractCount";
				}

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
			}
			else
			{
				return;
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Text text = (transform.GetComponentInChildren(typeof(Text)) as Text);
		if( (text)!=(null) )
		{
			(text.text)	= nCount.ToString();
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	void funcContractTerminate( object wParam=(null), object lParam=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (wParam)==(null) || wParam.GetType()!=typeof(tagBusiness) ) return;
		if( (lParam)==(null) || lParam.GetType()!=typeof(string) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		CApp.This.ViewProductList.Indigator( CApp.This.Language.Get(TEXT.계약을_중단하는_중입니다) );
		ManagementHash.SupplyContractTerminate( (wParam as tagBusiness), (lParam as string) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 공급 계약을 중단하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void ReleaseContract( string supply, tagProductStatic productstatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( !Func.Is(supply) ) return;
		if( (productstatic)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( tagSupplyContract contract in data.Contracts )
		{
			if( (contract.supply)==(supply) && (contract.productstatic)==(productstatic) )
			{
				data.Contracts.Remove(contract);
				break;
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		funcUpdateSupplyContractList();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
}

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------