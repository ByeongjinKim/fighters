using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

//-----------------------------------------------------------------------------------------------------------------------------------
// 사업체 정보를 처리하기 위한 클래스
//-----------------------------------------------------------------------------------------------------------------------------------
public class CViewBusiness : ViewPanel
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	[System.Serializable]
	public class tagData : _tagData
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public tagBusiness			business		= (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public GameObject			lefttop			= (null);
		public uiIcon				icon			= (null);
		public uiCompany			company			= (null);
		public uiCity				city			= (null);
		public uiPerson				manager			= (null);
		public Text					process			= (null);
		public uiGraph				graph			= (null);
		public objControl			destroy			= (null);
		public objControl			dropdown		= (null);
		public uiCompany			resume_company	= (null);
		public uiIcon				resume_nation	= (null);
		public uiCity				resume_city		= (null);
		public objControl			profit			= (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public List<uiDepartment>	Departments		= new List<uiDepartment>();
		public uiDepartment			DepartmentAdd	= (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public bool					allowUpdate		= (false);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	};
	public tagData		data		= new tagData();

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 활성화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public bool ON( tagBusiness business, bool allowRequest=(true) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( !app.Business.Is(business) )
		{
			Debug.Log(business);
			return false;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		bool isChange = Get()!=(business) || !Is(true);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(data.business)	= (business);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( base.ON(data) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
//			ForeBack();

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
//			app.Canvas.FullscreenScrollViewInit( ScrollView()._RectTransform() );

			//-----------------------------------------------------------------------------------------------------------------------
			// 그래프 : 순이익
			//-----------------------------------------------------------------------------------------------------------------------
			data.graph.AttachValue( data.profit.Value() );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( PlayerPrefs.GetInt("ViewBusiness-Fold")==(1) && !IsFold() )
			{
				Fold();
			}
			else
			{
				Func.Inactive( data.resume_company._GameObject() );
				Func.Inactive( data.resume_nation._GameObject() );
				Func.Inactive( data.resume_city._GameObject() );
				Func.Inactive( data.profit._GameObject() );
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( isChange )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			Fullscreen( new historyBusiness(business) );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			Clear();

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( !app.ViewBuildList.Is() )
			{
				Indigator( app.Language.Get(TEXT.사업체_정보를_불러오는중입니다) );
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( app.ViewIndigator.Is() )
			{
				app.ViewIndigator.SetCallback( funcSound );
			}
#if UNITY_EDITOR
			else
			{
				Debug.Log(business);
			}
#endif

			//-----------------------------------------------------------------------------------------------------------------------
			// 그래프 : 순이익
			//-----------------------------------------------------------------------------------------------------------------------
			data.graph.Set( (IDENTITY.BUSINESS), (business.id) );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( allowRequest )
			{
				ManagementHash.LoadBusiness( business );
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Icon().Set(Get().businessstatic);
		Company().Set(Get().Company());
		City().Set(Get().citystatic);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (data.resume_company)!=(null) ) data.resume_company.Set(Get().Company());
		if( (data.resume_nation)!=(null) )	data.resume_nation.Set(Get().citystatic.Nation());
		if( (data.resume_city)!=(null) )	data.resume_city.Set(Get().citystatic);

		//---------------------------------------------------------------------------------------------------------------------------
		// 관리자 (MANAGER)
		//---------------------------------------------------------------------------------------------------------------------------
		if( (Get().manager)!=(null) )
		{
			if( Get().Manager()!=(null) )
			{
				Manager().Set(Get().Manager());
			}
			else
			if( Get().manager.GetType()==typeof(string) )
			{
				Debug.Log("경영인 정보 로드가 필요함");
				(Manager().data.person)	= (Get().manager as string);
				app.Person.Reserve( Get().manager as string );
				app.ViewIndigator.ON( app.Person );
				Func.Inactive( Manager()._GameObject() );
			}
		}
		else
		if( (Get().company)!=(null) )
		{
			if( Get().Company()!=(null) )
			{
				if( Get().Company().Manager()!=(null) )
				{
					Manager().Set(Get().Company().Manager());
				}
				else
				if( Get().Company().manager.GetType()==typeof(string) )
				{
					(Manager().data.person)	= (Get().Company().manager as string);
					app.Person.Reserve( Get().Company().manager as string );
					app.ViewIndigator.ON( app.Person );
					Func.Inactive( Manager()._GameObject() );
				}
			}
			else
			if( Get().company.GetType()==typeof(string) )
			{
				Debug.Log("기업 정보 로드가 필요함");
				app.Company.Reserve( Get().company as string );
			}
		}
		else
		{
			Debug.Log("경영인 정보 로드가 필요함");
			Func.Inactive( Manager()._GameObject() );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// 사업체 철거
		//---------------------------------------------------------------------------------------------------------------------------
		if( (data.destroy)!=(null) )
		{
			if( app.Business.IsRight(Get()) )
			{
				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				data.destroy.Transform().SetParent( app.ViewNavigation._Transform() );
				(data.destroy._RectTransform().anchoredPosition) = new Vector2( (data.destroy._RectTransform().anchoredPosition.x), -app.ViewNavigation.Height()/(2) );

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				OutObjectRegister( data.destroy._GameObject() );

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
			}
			else
			{
				data.destroy.OFF();
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		TransNavigation( data.profit._GameObject(), app.Business.IsRight(Get()) );
		TransNavigation( data.resume_company._GameObject() );
		TransNavigation( data.resume_nation._GameObject() );
		TransNavigation( data.resume_city._GameObject() );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Func.TextWidthPerfect( data.resume_company.Label() );
		Func.TextWidthPerfect( data.resume_city.Name() );

		//---------------------------------------------------------------------------------------------------------------------------
		// 처리 시간
		//---------------------------------------------------------------------------------------------------------------------------
		ProcessTimeUpdate();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return base.ON();
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 네비게이션을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void ONNAVIGATION()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( Get()!=(null) && (Get().businessstatic)!=(null) )
		{
			app.ViewNavigation.ON( (this), app.Language.Get(Get().businessstatic.Name()) );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스가 전면에 출력되었을 때 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void ONFORE()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		app.ViewBottom.Fore();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 비활성화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool OFF()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( Is(true) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			(data.business)	= (null);

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			(data.DepartmentAdd)	= (null);
			GetList().Clear();

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( (data.destroy)!=(null) )
			{
				Func.Destroy( data.destroy );
				(data.destroy)	= (null);
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			return base.OFF();
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 사업체 정보를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public tagBusiness Get()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (data.business);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 리스트를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public List<uiDepartment> GetList()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (data.Departments);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 부서 정보를 등록하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void Register( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		uiDepartment department = Find(col.Get("id"));
		if( (department)==(null) )
		{
			(department) = Create( col );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (department)!=(null) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( department.Output()!=(null) )
			{
				(department.Output().text)	= Func.NumberFormat(col.GetInt("output"));
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( department.Info()!=(null) )
			{
				department.Info().Set( col );
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}
		else
		{
			Debug.Log(col);
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 상품 정보를 검색하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public uiDepartment Find( string id )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( !Func.Is(id) ) return (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( uiDepartment department in GetList() )
		{
			if( department.ID()==(id) )
			{
				return (department);
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (null);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 활성화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public uiDepartment FindFromType( string id )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( !Func.Is(id) ) return (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( uiDepartment department in GetList() )
		{
			if( department.Get()!=(null) && (department.Get().id)==(id) )
			{
				return (department);
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (null);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 부서 정보를 등록하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public uiDepartment Create( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		tagDepartmentStatic departmentstatic = (app.DepartmentStatic._FindFromTag(col.Get("type")) as tagDepartmentStatic);
		if( (departmentstatic)==(null) ) return (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		uiDepartment department = (Func.Create( ScrollView().Content(), (Resources.Load("UI/Department/"+GetPrefebId(departmentstatic)) as GameObject) ).GetComponent(typeof(uiDepartment)) as uiDepartment);
		if( (department)==(null) ) return (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( department.Subject()!=(null) )
		{
			department.Subject().Set( app.Language.Get(departmentstatic.Name()) );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		department.SetID( col.Get("id") );
		department.Set( departmentstatic );
		department.Set( Get() );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(department.Transform().sizeDelta)	= new Vector2( tagSystem.GetScreenWidth()-(40), (department.Transform().sizeDelta.y) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( department.Subject()!=(null) )
		{
			department.Subject().Set( Func.Script( app.Language.Get(TEXT.__부), app.Language.Get(departmentstatic.Name()) ) );
		}

		/*
	    //---------------------------------------------------------------------------------------------------------------------------
        // -
	    //---------------------------------------------------------------------------------------------------------------------------
		if( !app.Business.IsRight(Get()) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
		    // -
		    //-----------------------------------------------------------------------------------------------------------------------
			int			End		= (department.Transform().childCount);
			Transform	child	= (null);
			for( int i=0; i<(End); i++ )
			{
				//-------------------------------------------------------------------------------------------------------------------
		        // -
			    //-------------------------------------------------------------------------------------------------------------------
				(child) = department.Transform().GetChild(i);
				if( (child)==department.Subject().Transform() ) continue;
				if( (child)==department.Destroy().Transform() ) continue;

				//-------------------------------------------------------------------------------------------------------------------
		        // -
			    //-------------------------------------------------------------------------------------------------------------------
				if( (child)!=(null) )
				{
					(child.localPosition) += new Vector3( (0), (70), (0) );
				}

				//-------------------------------------------------------------------------------------------------------------------
		        // -
			    //-------------------------------------------------------------------------------------------------------------------
			}

			//-----------------------------------------------------------------------------------------------------------------------
		    // -
		    //-----------------------------------------------------------------------------------------------------------------------
			(department.Transform().sizeDelta)	-= new Vector2( (0), (65) );

			//-----------------------------------------------------------------------------------------------------------------------
		    // -
		    //-----------------------------------------------------------------------------------------------------------------------
		}
		*/

	    //---------------------------------------------------------------------------------------------------------------------------
        // -
	    //---------------------------------------------------------------------------------------------------------------------------
		if( app.Department.IsFold(department.ID()) )
		{
			Fold( department );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		GetList().Add( department );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (department);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void RegisterAdd()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( !IsDepartmentCanCreate() ) return;
		if( (data.DepartmentAdd)!=(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		uiDepartment department = (Func.Create( ScrollView().Content(), (Resources.Load("UI/Department/부서 생성") as GameObject) ).GetComponent(typeof(uiDepartment)) as uiDepartment);
		if( (department)!=(null) )
		{
			(data.DepartmentAdd) = (department);
		}
		else
		{
			return;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(department.Transform().sizeDelta)	= new Vector2( tagSystem.GetScreenWidth()-(40), (department.Transform().sizeDelta.y) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		GetList().Add( department );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 부서가 존재하는지 확인하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public bool IsDepartment( tagDepartmentStatic departmentstatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (departmentstatic)==(null) ) return false;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( uiDepartment department in GetList() )
		{
			if( department.Get()==(departmentstatic) )
			{
				return true;
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 부서가 존재하는지 확인하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public bool IsDepartmentCanCreate()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( tagDepartmentStatic departmentstatic in app.DepartmentStatic.GetList() )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( !app.Business.IsDepartment( app.Business.Get(), (departmentstatic) ) ) continue;
			if( app.ViewBusiness.IsDepartment(departmentstatic) ) continue;

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( (app.ViewBusiness.Get().businessstatic.Type)==(UPDATE_TYPE.Farm) )
			{
				if( (departmentstatic.id)==(DEPARTMENT.재배부) && app.ViewBusiness.FindFromType(DEPARTMENT.사육부)!=(null) )
				{
					continue;
				}
				else
				if( (departmentstatic.id)==(DEPARTMENT.사육부) && app.ViewBusiness.FindFromType(DEPARTMENT.재배부)!=(null) )
				{
					continue;
				}
				else
				if( (departmentstatic.id)==(DEPARTMENT.가공부) && app.ViewBusiness.FindFromType(DEPARTMENT.사육부)==(null) )
				{
					continue;
				}
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 리스트를 정렬 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void Sort()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		int					End			= (GetList().Count);
		tagDepartmentStatic	department1	= (null);
		tagDepartmentStatic	department2	= (null);
		uiDepartment		temp		= (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		for( int i=0; i<(End-1); i++ )
		{
			for( int j=(i+1); j<(End); j++ )
			{
				(department1)	= GetList()[i].Get();
				(department2)	= GetList()[j].Get();
				if( ( (department1)!=(null) && (department2)!=(null) && (department1.order)>(department2.order) ) || (department1)==(null) )
				{
					(temp)			= (GetList()[i]);
					(GetList()[i])	= (GetList()[j]);
					(GetList()[j])	= (temp);
				}
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		for( int i=0; i<(End); i++ )
		{
			GetList()[i].Transform().SetSiblingIndex(i);
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 리스트를 새로고침 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void Refresh()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (data.DepartmentAdd)!=(null) && !app.ViewBusiness.IsDepartmentCanCreate() )
		{
			GetList().Remove( data.DepartmentAdd );
			Func.Destroy( data.DepartmentAdd );
			(data.DepartmentAdd) = (null);
		}
		else
		if( (data.DepartmentAdd)!=(null) )
		{
			data.DepartmentAdd.Transform().SetAsLastSibling();
		}
		else
		if( (data.DepartmentAdd)==(null) && app.ViewBusiness.IsDepartmentCanCreate() )
		{
			if( app.Business.IsRight(Get()) )
			{
				RegisterAdd();
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		ScrollView().Init();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 부서 Prefeb 객체를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	string GetPrefebId( tagDepartmentStatic departmentstatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (departmentstatic)==(null) ) return (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		switch( departmentstatic.id )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// 재배부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.재배부):
				return "재배부";

			//-----------------------------------------------------------------------------------------------------------------------
			// 사육부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.사육부):
				return "사육부";

			//-----------------------------------------------------------------------------------------------------------------------
			// 가공부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.가공부):
				return "가공부";

			//-----------------------------------------------------------------------------------------------------------------------
			// 구매부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.구매부):
				return "구매부";

			//-----------------------------------------------------------------------------------------------------------------------
			// 제조부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.제조부):
				return "제조부";

			//-----------------------------------------------------------------------------------------------------------------------
			// 판매부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.판매부):
				return "판매부";

			//-----------------------------------------------------------------------------------------------------------------------
			// 재고부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.재고부):
				return "재고부";

			/*
			//-----------------------------------------------------------------------------------------------------------------------
			// 상표부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.상표부):
				return "상표부";
			*/

			/*
			//-----------------------------------------------------------------------------------------------------------------------
			// 광고부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.광고부):
				return "광고부";
			*/

			/*
			//-----------------------------------------------------------------------------------------------------------------------
			// 연구부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.연구부):
				return "연구부";
			*/

			//-----------------------------------------------------------------------------------------------------------------------
			// 채취부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.채취부):
				return "채취부";

			//-----------------------------------------------------------------------------------------------------------------------
			// 벌목부
			//-----------------------------------------------------------------------------------------------------------------------
			case (DEPARTMENT.벌목부):
				return "채취부";

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			default:
				Debug.Log(departmentstatic);
				break;

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return "Generic";
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 아이콘 객체를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public uiIcon Icon()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (data.icon);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 기업 객체를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public uiCompany Company()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (data.company);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 도시 객체를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public uiCity City()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (data.city);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 관리자 객체를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public uiPerson Manager()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (data.manager);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 활성화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void OnHistory( tagHistory _history )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (_history)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		historyBusiness history = (_history as historyBusiness);
		if( (history)!=(null) )
		{
			ON( history.business );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 취소 입력에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void Fold( uiDepartment department )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (department)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		float scroll = (ScrollView().Content().localPosition.y);
		{
			(scroll) += department.Fold();
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		ScrollView().Init();
		(ScrollView().Content().localPosition)	= new Vector3( (ScrollView().Content().localPosition.x), (scroll), (ScrollView().Content().localPosition.z) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( department.IsFold() )
		{
			app.Department.FoldRegister(department.ID());
		}
		else
		{
			app.Department.FoldRelease(department.ID());
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 부서 정보를 삭제하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void Release( uiDepartment department )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (department)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		GetList().Remove( department );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Func.Destroy( department );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Refresh();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 시간을 업데이트하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public bool ProcessTimeUpdate()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( app.Business.Is(Get()) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			int time = (int)( (play.serverTime) - (Get().process) );
			SetProcessTime( time );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( (play.Day)-(time)<(0) && (data.allowUpdate) )
			{
				Indigator( app.Language.Get(TEXT.사업체_정보를_불러오는중입니다) );
				ManagementHash.LoadBusiness(Get());
				SetAllowUpdate( false );
			}
			else
			if( (play.Day)-(time)>(0) )
			{
				return true;
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void SetAllowUpdate( bool option )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (data.allowUpdate)!=(option) )
		{
			(data.allowUpdate)	= (option);
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 시간을 업데이트하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void SetProcessTime( int _value )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		int value	= Mathf.Max( (0), (play.Day) - (_value) );
		int	hour	= (value/60);
		int minute	= (value%60);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(data.process.text)	= Func.LetterWord( (hour), (2) )+":"+Func.LetterWord( (minute), (2) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 사업체를 철거하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void funcDestroy( object wParam=(null), object lParam=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		app.ViewIndigator.ON( (app.Business), app.Language.Get(TEXT.사업체를_철거중입니다) );
		ManagementHash.BusinessDestroy( Get() );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 사운드를 재생하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void funcSound( object wParam=(null), object lParam=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( Apps.Is(Get().businessstatic.soundstatic) )
		{
			app.Sound.ON( Get().businessstatic.soundstatic );
		}
		else
		if( (Get().businessstatic.Type)==(UPDATE_TYPE.Farm) )
		{
			while( true )
			{
				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				uiDepartment department = FindFromType(DEPARTMENT.사육부);
				if( (department)!=(null) )
				{
					if( department.Make()!=(null) && Apps.Is(department.Make().Get()) )
					{
						app.Sound.ON( app.SoundStatic.Find((department.Make().Get() as tagProductStatic).sound) );
						break;
					}
				}

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				app.Sound.ON( SOUND.농장 );
				break;

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 부서 정보를 초기화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void Clear()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Func.ChildsDestroy( ScrollView().Content() );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		GetList().Clear();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	bool Fold()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( IsFold() )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			Func.Active( data.lefttop );
			Func.Inactive( data.resume_company._GameObject() );
			Func.Inactive( data.resume_nation._GameObject() );
			Func.Inactive( data.resume_city._GameObject() );
			Func.Inactive( data.profit._GameObject() );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			(data.dropdown.Transform().localScale)	= new Vector3( (data.dropdown.Transform().localScale.x), Mathf.Abs(data.dropdown.Transform().localScale.y), (data.dropdown.Transform().localScale.z) );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			(ScrollView()._RectTransform().sizeDelta)	= new Vector2( (ScrollView()._RectTransform().sizeDelta.x), (850) );
			ScrollView()._Align().Align();

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}
		else
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			Func.Inactive( data.lefttop );
			Func.Active( data.resume_company._GameObject() );
			Func.Active( data.resume_nation._GameObject() );
			Func.Active( data.resume_city._GameObject() );
			Func.Active( data.profit._GameObject() );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			(data.dropdown.Transform().localScale) = new Vector3( (data.dropdown.Transform().localScale.x), -Mathf.Abs(data.dropdown.Transform().localScale.y), (data.dropdown.Transform().localScale.z) );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			(ScrollView()._RectTransform().sizeDelta)	= new Vector2( (ScrollView()._RectTransform().sizeDelta.x), (1450) );
			ScrollView()._Align().Align();

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		ScrollView().Init();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(ScrollView()._ScrollRect().verticalNormalizedPosition) = (1);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return IsFold();
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public bool IsFold()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (data.dropdown.Transform().localScale.y)<(0) )
		{
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	protected override bool AllowOutObjectActive( GameObject obj )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (obj)==(null) ) return false;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (obj)==data.destroy._GameObject() )
		{
			return app.Business.IsRight(Get());
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return IsFold();
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 취소 입력에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool ONCANCEL( CANCEL Cancel )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( Is() )
		{
			return base.ONCANCEL( Cancel );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 활성화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool ONCONTROL( objControl control, CONTROL_ACTION Action, tagFocus focus )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(null) ) return false;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( ( (control)==Company().Control() || (control)==data.resume_company.Control() ) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewCompany.ON( Company().Get() );
			return true;
		}
		else
		if( ( (control)==City().Control() || (control)==data.resume_city.Control() ) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewCity.ON( City().Get() );
			return true;
		}
		else
		if( (control)==Manager().Control() && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewPerson.ON( Manager().Get() );
			return true;
		}
		else
		if( (control)==data.resume_nation.Control() && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewNation.ON( data.resume_nation.Get() as tagNationStatic );
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( uiDepartment department in GetList() )
		{
			if( (control)==department.Control() && (Action)==(CONTROL_ACTION.SELECT) )
			{
				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				if( department.IsFold() )
				{
					Fold( department );
				}
				else
				{
					department.OnClick();
				}

				//-------------------------------------------------------------------------------------------------------------------
				// -
				//-------------------------------------------------------------------------------------------------------------------
				return true;
			}
			else
			if( (control)==department.Subject() && (Action)==(CONTROL_ACTION.SELECT) )
			{
				Fold( department );
				return true;
			}
			else
			{
				if( department.ONCONTROL( (control), (Action), (focus) ) )
				{
					return true;
				}
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// 사업체 철거
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.destroy) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.Confirm.ON( app.Language.Get(TEXT.이_사업체를_철거하시겠습니까), (CONFIRM.YESNO), (funcDestroy) );
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.dropdown) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( Fold() )
			{
				PlayerPrefs.SetInt( "ViewBusiness-Fold", (1) );
			}
			else
			{
				PlayerPrefs.SetInt( "ViewBusiness-Fold", (0) );
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 메모리를 초기화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void Unloader()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(data.lefttop)			= (null);
		(data.icon)				= (null);
		(data.company)			= (null);
		(data.city)				= (null);
		(data.manager)			= (null);
		(data.process)			= (null);
		(data.graph)			= (null);
		(data.destroy)			= (null);
		(data.dropdown)			= (null);
		(data.resume_company)	= (null);
		(data.resume_nation)	= (null);
		(data.resume_city)		= (null);
		(data.profit)			= (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 불러오기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void Loader()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		base.Loader( Resources.Load("ApplicationLoader/View/ViewBusiness"), (play.uiCanvas) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(data.lefttop)			= (Func.Get( _Transform(), "Left-Top" ).gameObject);
		(data.icon)				= (Func.Get( _Transform(), "Left-Top/Icon" ).GetComponent(typeof(uiIcon)) as uiIcon);
		(data.company)			= (Func.Get( _Transform(), "Left-Top/Company" ).GetComponent(typeof(uiCompany)) as uiCompany);
		(data.city)				= (Func.Get( _Transform(), "Left-Top/City" ).GetComponent(typeof(uiCity)) as uiCity);
		(data.manager)			= (Func.Get( _Transform(), "Left-Top/Manager" ).GetComponent(typeof(uiPerson)) as uiPerson);
		(data.process)			= (Func.Get( _Transform(), "Left-Top/ProcessTime" ).GetComponentInChildren(typeof(Text)) as Text);
		(data.graph)			= (Func.Get( _Transform(), "Left-Top/Graph" ).GetComponent(typeof(uiGraph)) as uiGraph);
		(data.dropdown)			= (Func.Get( _Transform(), "Right-Top/Dropdown" ).GetComponent(typeof(objControl)) as objControl);
		(data.destroy)			= (Func.Get( _Transform(), "Destroy" ).GetComponent(typeof(objControl)) as objControl);
		(data.resume_company)	= (Func.Get( _Transform(), "Resume/Company" ).GetComponent(typeof(uiCompany)) as uiCompany);
		(data.resume_nation)	= (Func.Get( _Transform(), "Resume/Nation" ).GetComponent(typeof(uiIcon)) as uiIcon);
		(data.resume_city)		= (Func.Get( _Transform(), "Resume/City" ).GetComponent(typeof(uiCity)) as uiCity);
		(data.profit)			= (Func.Get( _Transform(), "Profit" ).GetComponent(typeof(objControl)) as objControl);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
}

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------