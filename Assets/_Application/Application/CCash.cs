using System.Collections;
using System.Collections.Generic;
using UnityEngine;

//-----------------------------------------------------------------------------------------------------------------------------------
// 자금 정보를 처리하기 위한 클래스
//-----------------------------------------------------------------------------------------------------------------------------------
public class CCash : MonoBehaviour
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	protected CApp		app			= (null);
	protected CPlay		play		= (null);

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	void OnEnable()
	{
		(this.app)		= (CApp.This);
		(this.play)		= (CPlay.This);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 자금을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void ON( List<tagCash> Cashes, tagCurrencyStatic currencystatic, decimal value )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (Cashes)==(null) ) return;
		if( (currencystatic)==(null) ) return;
		if( (value)==(0) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		tagCash cash = Find( (Cashes), (currencystatic) );
		if( (cash)==(null) )
		{
			(cash) = new tagCash();
			(cash.currency)	= (currencystatic);
			Cashes.Add( cash );
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(cash.value) = (value);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 자금을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public tagCash Find( List<tagCash> Cashes, tagCurrencyStatic currencystatic )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (Cashes)==(null) ) return (null);
		if( (currencystatic)==(null) ) return (null);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( tagCash cash in Cashes )
		{
			if( (cash.currency)==(currencystatic) )
			{
				return (cash);
			}
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (null);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public decimal Exchange( decimal value, tagCurrencyStatic currency )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		if( (currency)==(null) ) return (0);

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return (value) * (decimal)(currency.value);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public decimal Exchange( decimal value )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return Exchange( (value), app.Player.Currency() );

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public string ExchangeToFormat( decimal value, tagCurrencyStatic currency )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		if( (currency)==(null) ) return (null);

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		if( Func.Is(currency.format) )
		{
			return Func.Script( app.Language.Get(currency.format), Func.NumberFormat( (long)Exchange( (value), (currency) ) ), app.Language.Get(currency.Name()) );
		}

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return Func.NumberFormat( (long)( (value) * (decimal)(currency.value) ) )+" "+app.Language.Get(currency.Name());
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public string ExchangeToString( decimal value, tagCurrencyStatic currency )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		if( (currency)==(null) ) return (null);

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		if( Func.Is(currency.format) )
		{
			return Func.Script( app.Language.Get(currency.format), Func.NumberUnit( (long)Exchange( (value), (currency) ) ), app.Language.Get(currency.Name()) );
		}

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return Func.NumberUnit( (long)( (value) * (decimal)(currency.value) ) )+" "+app.Language.Get(currency.Name());
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public string ExchangeToString( decimal value )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return ExchangeToString( (value), app.Player.Currency() );

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public string ExchangeToString( float value )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return ExchangeToString( (decimal)(value), app.Player.Currency() );

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public string ExchangeToString( float value, tagCurrencyStatic currency )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		if( (currency)==(null) ) return (null);

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return ExchangeToString( (decimal)(value), app.Player.Currency() );
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public string ExchangeToFormat( float value )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return ExchangeToFormat( (decimal)(value), app.Player.Currency() );

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 환율을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public float Exchange( float value )
	{
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
		return (float)Exchange( (decimal)(value) );

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
}

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------