using System.Collections;
using System.Collections.Generic;
using UnityEngine;

//-----------------------------------------------------------------------------------------------------------------------------------
// 주식 정보를 처리하기 위한 클래스
//-----------------------------------------------------------------------------------------------------------------------------------
public class CStock : MonoBehaviour
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	protected CApp		app			= (null);
	protected CPlay		play		= (null);

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	void OnEnable()
	{
		(this.app)		= (CApp.This);
		(this.play)		= (CPlay.This);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 주식을 구매하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void funcBuy( object wParam=(null), object lParam=(null) )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (wParam)==(null) || wParam.GetType()!=typeof(tagCompany) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		app.ViewIndigator.ON( (this), app.Language.Get(TEXT.주식을_거래하는_중입니다) );
		ManagementHash.StockBuy( wParam as tagCompany );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 주식을 구매하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void Buy( tagCompany company )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (company)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( true )
		{
			app.Confirm.ON( app.Language.Get(TEXT.준비중입니다) );
			return;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( app.Identity.IsCompany() )
		{
			//---------------------------------------------------------------------------------------------------------------------------
			// 기업의_소유주만_주식을_거래할_수_있습니다
			//---------------------------------------------------------------------------------------------------------------------------
			if( !app.Company.IsOwner(app.Identity.Company()) )
			{
				app.Confirm.ON( app.Language.Get(TEXT.기업의_소유주만_주식을_거래할_수_있습니다) );
				return;
			}

			//---------------------------------------------------------------------------------------------------------------------------
			// 자사_주식은_매입할_수_없습니다
			//---------------------------------------------------------------------------------------------------------------------------
			if( app.Identity.IsCompany() && app.Identity.Company()==(company) )
			{
				app.Confirm.ON( app.Language.Get(TEXT.자사_주식을_소각시겠습하니까), (CONFIRM.YESNO), (funcBuy), (company) );
				return;
			}

			//---------------------------------------------------------------------------------------------------------------------------
			// -
			//---------------------------------------------------------------------------------------------------------------------------
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		app.Confirm.ON( Func.Script( app.Language.Get(TEXT.__주식을_매입하시겠습니까), (company.name) ), (CONFIRM.YESNO), (funcBuy), (company) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
}

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------