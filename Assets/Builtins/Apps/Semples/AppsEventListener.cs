using UnityEngine;
using System.Collections;

//-----------------------------------------------------------------------------------------------------------------------------------
// 어플리케이션의 이벤트 정보를 처리하기 위한 클래스
//-----------------------------------------------------------------------------------------------------------------------------------
public class AppsEventListener : MonoBehaviour
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	[System.Serializable]
	public class tagData
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public string                   AppName             = "semslive";

		public string                   ServerAddr          = "http://ava.pe.kr/apps_func/";

		public string                   Root                = "apps_func";

		public bool                     HttpLog             = (true);

		public bool                     PacketEventLog      = (true);

		public bool                     Log                 = (true);

		public APPS_LINKAGE             Market;

		public APPS_LINKAGE             Linkage;

		public float                    Version             = (0);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	};

	public tagData                      data                = new tagData();

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	void Awake()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Apps.onConnectFailed	+= onConnectFailed;
		Apps.onReceive			+= onReceive;
		Apps.onConnect			+= onConnect;
		Apps.onLogin			+= onLogin;
		Apps.onFriend			+= onFriend;
		Apps.onMemorize			+= onMemorize;
		Apps.onStorage			+= onStorage;
		Apps.onFailed			+= onFailed;
		Apps.onEcho				+= onEcho;
		Apps.onItemState		+= onItemState;
		Apps.onClientMessage	+= onClientMessage;
		Apps.onPlatformInfo		+= onPlatformInfo;
		Apps.onPoint			+= onPoint;
		Apps.onCash				+= onCash;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Apps.SetVersion( data.Version );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Apps.Connect( (transform), (data.ServerAddr), (data.AppName), (data.Root) );
		AppsHTTP.SetLog( data.HttpLog );
		Apps.SetPacketEventLog( data.PacketEventLog );
		Apps.SetLog( data.Log );
		Apps.AutoUpdate( false );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	CApp	app		= (null);
	CPlay	play	= (null);

	//-------------------------------------------------------------------------------------------------------------------------------
	// 클래스를 초기화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void Start()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(app)	= (CApp.This);
		(play)	= (CPlay.This);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 패킷 수신에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onReceive( string compile, AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (compile)==(null) ) return;
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 버전이 일치하지 않습니다.
	//-------------------------------------------------------------------------------------------------------------------------------
	void onVersion( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Debug.Log( "어플리케이션 버전이 최신 버전이 아닙니다. 버전을 업데이트해주세요." );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 서버 연결에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onConnect( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//--------------------------------------------------------------------------------------------------------------------------
		/*
		if( !FacebookAndroid.isSessionValid() )
		{
			Apps.LocalizeLogin();
		}
		*/

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 로그인에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onLogin( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		AppsFunc.Log( "(Login : "+(col.Get("id"))+")" );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 친구 정보를 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onFriend( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
//      Debug.Log( "id = "+col.Get("id")+", name = "+col.Get("name")+", score= "+col.Get("score") );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 메모리 정보를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onMemorize( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Debug.Log( "column = "+col.Get("column")+", value= "+col.Get("value")+", UpdateTime= "+col.Get("UpdateDate") );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 입고 정보를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onStorage( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Debug.Log( "instance = "+col.Get("instance")+", item= "+col.Get("item")+", count= "+col.Get("count") );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 실패 정보를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onFailed( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Debug.Log("(Failed : "+col.Get("text")+")");

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 에코 메세지를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onEcho( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Debug.Log("(Echo : "+col.Get("text")+")");

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 아이템 정보를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onItemState( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Debug.LogWarning( col );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 서버 연결에 실패했을 때 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onConnectFailed()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Debug.LogError("SemsApps - Server Connect Failed");

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 클라이언트 메세지 정보를 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onClientMessage( AppsParameter col )
	{
		/*
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		app.Engine.ClientMessage( col.Get("message") );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		*/
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 플랫폼 정보를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	void onPlatformInfo( AppsParameter col )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (col)==(null) ) return;

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		Debug.LogWarning( col );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//포인트 정보를 수신하기 위한 함수
	void onPoint( AppsParameter col )
	{
		if( col==null ) return;
		Debug.LogWarning( col );
	}

	//캐쉬 정보를 수신하기 위한 함수
	void onCash( AppsParameter col )
	{
		if( col==null ) return;
		Debug.LogWarning( col );
	}
}